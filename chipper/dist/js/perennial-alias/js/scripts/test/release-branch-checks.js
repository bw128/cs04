// Copyright 2024, University of Colorado Boulder

/**
 * Checking yotta=false (https://github.com/phetsims/phetcommon/issues/65) and yotta*=*
 * (https://github.com/phetsims/phetcommon/issues/66) behavior on non-refreshed release branches.
 *
 * NOTE: refresh release branches if not doing an active MR.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

const puppeteerLoad = require('../../common/puppeteerLoad');
const Maintenance = require('../../common/Maintenance');
const winston = require('../../../../../../perennial-alias/node_modules/winston');
const puppeteer = require('puppeteer');
winston.default.transports.console.level = 'error';
(async () => {
  const browser = await puppeteer.launch({
    args: ['--disable-gpu']
  });
  const getBaseURLs = async releaseBranch => {
    const buildDir = `http://localhost/release-branches/${releaseBranch.repo}-${releaseBranch.branch}/${releaseBranch.repo}/build`;
    const urls = [];
    const usesChipper2 = await releaseBranch.usesChipper2();
    if (releaseBranch.brands.includes('phet')) {
      urls.push(`${buildDir}/${usesChipper2 ? 'phet/' : ''}${releaseBranch.repo}_all${usesChipper2 ? '_phet' : ''}.html?webgl=false`);
    }
    if (releaseBranch.brands.includes('phet-io')) {
      const standaloneParams = await releaseBranch.getPhetioStandaloneQueryParameter();
      const phetioSuffix = usesChipper2 ? '_all_phet-io' : '_en-phetio';
      urls.push(`${buildDir}/${usesChipper2 ? 'phet-io/' : ''}${releaseBranch.repo}${phetioSuffix}.html?${standaloneParams}&webgl=false`);
    }
    return urls;
  };
  const getLoadedURLs = async url => {
    const urls = [];
    await puppeteerLoad(url, {
      onPageCreation: page => page.on('request', request => {
        const url = request.url();
        if (!url.startsWith('data:')) {
          urls.push(url);
        }
      }),
      gotoTimeout: 60000,
      waitAfterLoad: 2000,
      browser: browser
    });
    return urls;
  };
  const demoYottaQueryParameterKey = 'yottaSomeFlag';
  const demoYottaQueryParameterValue = 'someValue';
  const analyzeURLs = urls => {
    return {
      sentGoogleAnalytics: urls.some(url => url.includes('collect?')),
      sentYotta: urls.some(url => url.includes('yotta/immediate.gif')),
      sentExternalRequest: urls.some(url => !url.startsWith('http://localhost')),
      hasDemoYottaQueryParameter: urls.some(url => {
        return new URLSearchParams(new URL(url).search).get(demoYottaQueryParameterKey) === demoYottaQueryParameterValue;
      })
    };
  };
  for (const releaseBranch of await Maintenance.loadAllMaintenanceBranches()) {
    console.log(releaseBranch.toString());
    const urls = await getBaseURLs(releaseBranch);
    for (const url of urls) {
      const plainURL = url;
      const plainAnalysis = analyzeURLs(await getLoadedURLs(plainURL));
      if (!plainAnalysis.sentGoogleAnalytics) {
        console.log('  No Google Analytics sent', plainURL);
      }
      if (!plainAnalysis.sentYotta) {
        console.log('  No yotta sent', plainURL);
      }
      const yottaFalseURL = `${url}&yotta=false`;
      const yottaFalseAnalysis = analyzeURLs(await getLoadedURLs(yottaFalseURL));
      if (yottaFalseAnalysis.sentExternalRequest || yottaFalseAnalysis.sentGoogleAnalytics || yottaFalseAnalysis.sentYotta) {
        console.log('  yotta=false sent something', yottaFalseAnalysis);
      }
      const yottaSomeFlagURL = `${url}&${demoYottaQueryParameterKey}=${demoYottaQueryParameterValue}`;
      const yottaSomeFlagAnalysis = analyzeURLs(await getLoadedURLs(yottaSomeFlagURL));
      if (!yottaSomeFlagAnalysis.hasDemoYottaQueryParameter) {
        console.log(`  No ${demoYottaQueryParameterKey}=${demoYottaQueryParameterValue} sent`, yottaSomeFlagAnalysis);
      }

      // Consider adding fuzzing in the future, it seems like we're unable to get things to run after a fuzz failure though
      // const fuzzURL = `${url}&fuzz&fuzzMouse&fuzzTouch&fuzzBoard`;
      // try {
      //   await puppeteerLoad( fuzzURL, {
      //     waitForFunction: 'window.phet.joist.sim',
      //     gotoTimeout: 60000,
      //     waitAfterLoad: 5000,
      //     browser: browser
      //   } );
      // }
      // catch( e ) {
      //   console.log( `fuzz failure on ${fuzzURL}:\n${e}` );
      // }
    }
  }
  browser.close();
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwdXBwZXRlZXJMb2FkIiwicmVxdWlyZSIsIk1haW50ZW5hbmNlIiwid2luc3RvbiIsInB1cHBldGVlciIsImRlZmF1bHQiLCJ0cmFuc3BvcnRzIiwiY29uc29sZSIsImxldmVsIiwiYnJvd3NlciIsImxhdW5jaCIsImFyZ3MiLCJnZXRCYXNlVVJMcyIsInJlbGVhc2VCcmFuY2giLCJidWlsZERpciIsInJlcG8iLCJicmFuY2giLCJ1cmxzIiwidXNlc0NoaXBwZXIyIiwiYnJhbmRzIiwiaW5jbHVkZXMiLCJwdXNoIiwic3RhbmRhbG9uZVBhcmFtcyIsImdldFBoZXRpb1N0YW5kYWxvbmVRdWVyeVBhcmFtZXRlciIsInBoZXRpb1N1ZmZpeCIsImdldExvYWRlZFVSTHMiLCJ1cmwiLCJvblBhZ2VDcmVhdGlvbiIsInBhZ2UiLCJvbiIsInJlcXVlc3QiLCJzdGFydHNXaXRoIiwiZ290b1RpbWVvdXQiLCJ3YWl0QWZ0ZXJMb2FkIiwiZGVtb1lvdHRhUXVlcnlQYXJhbWV0ZXJLZXkiLCJkZW1vWW90dGFRdWVyeVBhcmFtZXRlclZhbHVlIiwiYW5hbHl6ZVVSTHMiLCJzZW50R29vZ2xlQW5hbHl0aWNzIiwic29tZSIsInNlbnRZb3R0YSIsInNlbnRFeHRlcm5hbFJlcXVlc3QiLCJoYXNEZW1vWW90dGFRdWVyeVBhcmFtZXRlciIsIlVSTFNlYXJjaFBhcmFtcyIsIlVSTCIsInNlYXJjaCIsImdldCIsImxvYWRBbGxNYWludGVuYW5jZUJyYW5jaGVzIiwibG9nIiwidG9TdHJpbmciLCJwbGFpblVSTCIsInBsYWluQW5hbHlzaXMiLCJ5b3R0YUZhbHNlVVJMIiwieW90dGFGYWxzZUFuYWx5c2lzIiwieW90dGFTb21lRmxhZ1VSTCIsInlvdHRhU29tZUZsYWdBbmFseXNpcyIsImNsb3NlIl0sInNvdXJjZXMiOlsicmVsZWFzZS1icmFuY2gtY2hlY2tzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDI0LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDaGVja2luZyB5b3R0YT1mYWxzZSAoaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXRjb21tb24vaXNzdWVzLzY1KSBhbmQgeW90dGEqPSpcclxuICogKGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9waGV0Y29tbW9uL2lzc3Vlcy82NikgYmVoYXZpb3Igb24gbm9uLXJlZnJlc2hlZCByZWxlYXNlIGJyYW5jaGVzLlxyXG4gKlxyXG4gKiBOT1RFOiByZWZyZXNoIHJlbGVhc2UgYnJhbmNoZXMgaWYgbm90IGRvaW5nIGFuIGFjdGl2ZSBNUi5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmNvbnN0IHB1cHBldGVlckxvYWQgPSByZXF1aXJlKCAnLi4vLi4vY29tbW9uL3B1cHBldGVlckxvYWQnICk7XHJcbmNvbnN0IE1haW50ZW5hbmNlID0gcmVxdWlyZSggJy4uLy4uL2NvbW1vbi9NYWludGVuYW5jZScgKTtcclxuY29uc3Qgd2luc3RvbiA9IHJlcXVpcmUoICd3aW5zdG9uJyApO1xyXG5jb25zdCBwdXBwZXRlZXIgPSByZXF1aXJlKCAncHVwcGV0ZWVyJyApO1xyXG5cclxud2luc3Rvbi5kZWZhdWx0LnRyYW5zcG9ydHMuY29uc29sZS5sZXZlbCA9ICdlcnJvcic7XHJcblxyXG4oIGFzeW5jICgpID0+IHtcclxuICBjb25zdCBicm93c2VyID0gYXdhaXQgcHVwcGV0ZWVyLmxhdW5jaCgge1xyXG4gICAgYXJnczogW1xyXG4gICAgICAnLS1kaXNhYmxlLWdwdSdcclxuICAgIF1cclxuICB9ICk7XHJcblxyXG4gIGNvbnN0IGdldEJhc2VVUkxzID0gYXN5bmMgcmVsZWFzZUJyYW5jaCA9PiB7XHJcbiAgICBjb25zdCBidWlsZERpciA9IGBodHRwOi8vbG9jYWxob3N0L3JlbGVhc2UtYnJhbmNoZXMvJHtyZWxlYXNlQnJhbmNoLnJlcG99LSR7cmVsZWFzZUJyYW5jaC5icmFuY2h9LyR7cmVsZWFzZUJyYW5jaC5yZXBvfS9idWlsZGA7XHJcblxyXG4gICAgY29uc3QgdXJscyA9IFtdO1xyXG5cclxuICAgIGNvbnN0IHVzZXNDaGlwcGVyMiA9IGF3YWl0IHJlbGVhc2VCcmFuY2gudXNlc0NoaXBwZXIyKCk7XHJcblxyXG4gICAgaWYgKCByZWxlYXNlQnJhbmNoLmJyYW5kcy5pbmNsdWRlcyggJ3BoZXQnICkgKSB7XHJcbiAgICAgIHVybHMucHVzaCggYCR7YnVpbGREaXJ9LyR7dXNlc0NoaXBwZXIyID8gJ3BoZXQvJyA6ICcnfSR7cmVsZWFzZUJyYW5jaC5yZXBvfV9hbGwke3VzZXNDaGlwcGVyMiA/ICdfcGhldCcgOiAnJ30uaHRtbD93ZWJnbD1mYWxzZWAgKTtcclxuICAgIH1cclxuICAgIGlmICggcmVsZWFzZUJyYW5jaC5icmFuZHMuaW5jbHVkZXMoICdwaGV0LWlvJyApICkge1xyXG4gICAgICBjb25zdCBzdGFuZGFsb25lUGFyYW1zID0gYXdhaXQgcmVsZWFzZUJyYW5jaC5nZXRQaGV0aW9TdGFuZGFsb25lUXVlcnlQYXJhbWV0ZXIoKTtcclxuXHJcbiAgICAgIGNvbnN0IHBoZXRpb1N1ZmZpeCA9IHVzZXNDaGlwcGVyMiA/ICdfYWxsX3BoZXQtaW8nIDogJ19lbi1waGV0aW8nO1xyXG5cclxuICAgICAgdXJscy5wdXNoKCBgJHtidWlsZERpcn0vJHt1c2VzQ2hpcHBlcjIgPyAncGhldC1pby8nIDogJyd9JHtyZWxlYXNlQnJhbmNoLnJlcG99JHtwaGV0aW9TdWZmaXh9Lmh0bWw/JHtzdGFuZGFsb25lUGFyYW1zfSZ3ZWJnbD1mYWxzZWAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXJscztcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXRMb2FkZWRVUkxzID0gYXN5bmMgdXJsID0+IHtcclxuICAgIGNvbnN0IHVybHMgPSBbXTtcclxuXHJcbiAgICBhd2FpdCBwdXBwZXRlZXJMb2FkKCB1cmwsIHtcclxuICAgICAgb25QYWdlQ3JlYXRpb246IHBhZ2UgPT4gcGFnZS5vbiggJ3JlcXVlc3QnLCByZXF1ZXN0ID0+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSByZXF1ZXN0LnVybCgpO1xyXG5cclxuICAgICAgICBpZiAoICF1cmwuc3RhcnRzV2l0aCggJ2RhdGE6JyApICkge1xyXG4gICAgICAgICAgdXJscy5wdXNoKCB1cmwgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gKSxcclxuICAgICAgZ290b1RpbWVvdXQ6IDYwMDAwLFxyXG4gICAgICB3YWl0QWZ0ZXJMb2FkOiAyMDAwLFxyXG4gICAgICBicm93c2VyOiBicm93c2VyXHJcbiAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIHVybHM7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVtb1lvdHRhUXVlcnlQYXJhbWV0ZXJLZXkgPSAneW90dGFTb21lRmxhZyc7XHJcbiAgY29uc3QgZGVtb1lvdHRhUXVlcnlQYXJhbWV0ZXJWYWx1ZSA9ICdzb21lVmFsdWUnO1xyXG5cclxuICBjb25zdCBhbmFseXplVVJMcyA9IHVybHMgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc2VudEdvb2dsZUFuYWx5dGljczogdXJscy5zb21lKCB1cmwgPT4gdXJsLmluY2x1ZGVzKCAnY29sbGVjdD8nICkgKSxcclxuICAgICAgc2VudFlvdHRhOiB1cmxzLnNvbWUoIHVybCA9PiB1cmwuaW5jbHVkZXMoICd5b3R0YS9pbW1lZGlhdGUuZ2lmJyApICksXHJcbiAgICAgIHNlbnRFeHRlcm5hbFJlcXVlc3Q6IHVybHMuc29tZSggdXJsID0+ICF1cmwuc3RhcnRzV2l0aCggJ2h0dHA6Ly9sb2NhbGhvc3QnICkgKSxcclxuICAgICAgaGFzRGVtb1lvdHRhUXVlcnlQYXJhbWV0ZXI6IHVybHMuc29tZSggdXJsID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtcyggbmV3IFVSTCggdXJsICkuc2VhcmNoICkuZ2V0KCBkZW1vWW90dGFRdWVyeVBhcmFtZXRlcktleSApID09PSBkZW1vWW90dGFRdWVyeVBhcmFtZXRlclZhbHVlO1xyXG4gICAgICB9IClcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgZm9yICggY29uc3QgcmVsZWFzZUJyYW5jaCBvZiBhd2FpdCBNYWludGVuYW5jZS5sb2FkQWxsTWFpbnRlbmFuY2VCcmFuY2hlcygpICkge1xyXG4gICAgY29uc29sZS5sb2coIHJlbGVhc2VCcmFuY2gudG9TdHJpbmcoKSApO1xyXG5cclxuICAgIGNvbnN0IHVybHMgPSBhd2FpdCBnZXRCYXNlVVJMcyggcmVsZWFzZUJyYW5jaCApO1xyXG5cclxuICAgIGZvciAoIGNvbnN0IHVybCBvZiB1cmxzICkge1xyXG4gICAgICBjb25zdCBwbGFpblVSTCA9IHVybDtcclxuICAgICAgY29uc3QgcGxhaW5BbmFseXNpcyA9IGFuYWx5emVVUkxzKCBhd2FpdCBnZXRMb2FkZWRVUkxzKCBwbGFpblVSTCApICk7XHJcbiAgICAgIGlmICggIXBsYWluQW5hbHlzaXMuc2VudEdvb2dsZUFuYWx5dGljcyApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyggJyAgTm8gR29vZ2xlIEFuYWx5dGljcyBzZW50JywgcGxhaW5VUkwgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoICFwbGFpbkFuYWx5c2lzLnNlbnRZb3R0YSApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyggJyAgTm8geW90dGEgc2VudCcsIHBsYWluVVJMICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHlvdHRhRmFsc2VVUkwgPSBgJHt1cmx9JnlvdHRhPWZhbHNlYDtcclxuICAgICAgY29uc3QgeW90dGFGYWxzZUFuYWx5c2lzID0gYW5hbHl6ZVVSTHMoIGF3YWl0IGdldExvYWRlZFVSTHMoIHlvdHRhRmFsc2VVUkwgKSApO1xyXG4gICAgICBpZiAoIHlvdHRhRmFsc2VBbmFseXNpcy5zZW50RXh0ZXJuYWxSZXF1ZXN0IHx8IHlvdHRhRmFsc2VBbmFseXNpcy5zZW50R29vZ2xlQW5hbHl0aWNzIHx8IHlvdHRhRmFsc2VBbmFseXNpcy5zZW50WW90dGEgKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coICcgIHlvdHRhPWZhbHNlIHNlbnQgc29tZXRoaW5nJywgeW90dGFGYWxzZUFuYWx5c2lzICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHlvdHRhU29tZUZsYWdVUkwgPSBgJHt1cmx9JiR7ZGVtb1lvdHRhUXVlcnlQYXJhbWV0ZXJLZXl9PSR7ZGVtb1lvdHRhUXVlcnlQYXJhbWV0ZXJWYWx1ZX1gO1xyXG4gICAgICBjb25zdCB5b3R0YVNvbWVGbGFnQW5hbHlzaXMgPSBhbmFseXplVVJMcyggYXdhaXQgZ2V0TG9hZGVkVVJMcyggeW90dGFTb21lRmxhZ1VSTCApICk7XHJcbiAgICAgIGlmICggIXlvdHRhU29tZUZsYWdBbmFseXNpcy5oYXNEZW1vWW90dGFRdWVyeVBhcmFtZXRlciApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyggYCAgTm8gJHtkZW1vWW90dGFRdWVyeVBhcmFtZXRlcktleX09JHtkZW1vWW90dGFRdWVyeVBhcmFtZXRlclZhbHVlfSBzZW50YCwgeW90dGFTb21lRmxhZ0FuYWx5c2lzICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENvbnNpZGVyIGFkZGluZyBmdXp6aW5nIGluIHRoZSBmdXR1cmUsIGl0IHNlZW1zIGxpa2Ugd2UncmUgdW5hYmxlIHRvIGdldCB0aGluZ3MgdG8gcnVuIGFmdGVyIGEgZnV6eiBmYWlsdXJlIHRob3VnaFxyXG4gICAgICAvLyBjb25zdCBmdXp6VVJMID0gYCR7dXJsfSZmdXp6JmZ1enpNb3VzZSZmdXp6VG91Y2gmZnV6ekJvYXJkYDtcclxuICAgICAgLy8gdHJ5IHtcclxuICAgICAgLy8gICBhd2FpdCBwdXBwZXRlZXJMb2FkKCBmdXp6VVJMLCB7XHJcbiAgICAgIC8vICAgICB3YWl0Rm9yRnVuY3Rpb246ICd3aW5kb3cucGhldC5qb2lzdC5zaW0nLFxyXG4gICAgICAvLyAgICAgZ290b1RpbWVvdXQ6IDYwMDAwLFxyXG4gICAgICAvLyAgICAgd2FpdEFmdGVyTG9hZDogNTAwMCxcclxuICAgICAgLy8gICAgIGJyb3dzZXI6IGJyb3dzZXJcclxuICAgICAgLy8gICB9ICk7XHJcbiAgICAgIC8vIH1cclxuICAgICAgLy8gY2F0Y2goIGUgKSB7XHJcbiAgICAgIC8vICAgY29uc29sZS5sb2coIGBmdXp6IGZhaWx1cmUgb24gJHtmdXp6VVJMfTpcXG4ke2V9YCApO1xyXG4gICAgICAvLyB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBicm93c2VyLmNsb3NlKCk7XHJcbn0gKSgpOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxhQUFhLEdBQUdDLE9BQU8sQ0FBRSw0QkFBNkIsQ0FBQztBQUM3RCxNQUFNQyxXQUFXLEdBQUdELE9BQU8sQ0FBRSwwQkFBMkIsQ0FBQztBQUN6RCxNQUFNRSxPQUFPLEdBQUdGLE9BQU8sQ0FBRSxTQUFVLENBQUM7QUFDcEMsTUFBTUcsU0FBUyxHQUFHSCxPQUFPLENBQUUsV0FBWSxDQUFDO0FBRXhDRSxPQUFPLENBQUNFLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDQyxPQUFPLENBQUNDLEtBQUssR0FBRyxPQUFPO0FBRWxELENBQUUsWUFBWTtFQUNaLE1BQU1DLE9BQU8sR0FBRyxNQUFNTCxTQUFTLENBQUNNLE1BQU0sQ0FBRTtJQUN0Q0MsSUFBSSxFQUFFLENBQ0osZUFBZTtFQUVuQixDQUFFLENBQUM7RUFFSCxNQUFNQyxXQUFXLEdBQUcsTUFBTUMsYUFBYSxJQUFJO0lBQ3pDLE1BQU1DLFFBQVEsR0FBSSxxQ0FBb0NELGFBQWEsQ0FBQ0UsSUFBSyxJQUFHRixhQUFhLENBQUNHLE1BQU8sSUFBR0gsYUFBYSxDQUFDRSxJQUFLLFFBQU87SUFFOUgsTUFBTUUsSUFBSSxHQUFHLEVBQUU7SUFFZixNQUFNQyxZQUFZLEdBQUcsTUFBTUwsYUFBYSxDQUFDSyxZQUFZLENBQUMsQ0FBQztJQUV2RCxJQUFLTCxhQUFhLENBQUNNLE1BQU0sQ0FBQ0MsUUFBUSxD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