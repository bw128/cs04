// Copyright 2017-2023, University of Colorado Boulder

/**
 * Content for a KeyboardHelpDialog that describes how to use sliders.
 *
 * @author Jesse Greenberg
 */

import PatternStringProperty from '../../../../axon/js/PatternStringProperty.js';
import Enumeration from '../../../../phet-core/js/Enumeration.js';
import EnumerationValue from '../../../../phet-core/js/EnumerationValue.js';
import optionize from '../../../../phet-core/js/optionize.js';
import { HBox } from '../../../../scenery/js/imports.js';
import sceneryPhet from '../../sceneryPhet.js';
import SceneryPhetStrings from '../../SceneryPhetStrings.js';
import TextKeyNode from '../TextKeyNode.js';
import KeyboardHelpIconFactory from './KeyboardHelpIconFactory.js';
import KeyboardHelpSection from './KeyboardHelpSection.js';
import KeyboardHelpSectionRow from './KeyboardHelpSectionRow.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import assertMutuallyExclusiveOptions from '../../../../phet-core/js/assertMutuallyExclusiveOptions.js';

// Configurations of arrow keys that can be displayed for 'Move between items in a group'
class ArrowKeyIconDisplay extends EnumerationValue {
  static UP_DOWN = new ArrowKeyIconDisplay();
  static LEFT_RIGHT = new ArrowKeyIconDisplay();
  static BOTH = new ArrowKeyIconDisplay();
  static enumeration = new Enumeration(ArrowKeyIconDisplay);
}
export default class SliderControlsKeyboardHelpSection extends KeyboardHelpSection {
  static ArrowKeyIconDisplay = ArrowKeyIconDisplay;
  constructor(providedOptions) {
    // If you provide a string for the verb or slider, it will be filled into the default pattern
    // for all rows so you cannot customize each row individually.
    assert && assertMutuallyExclusiveOptions(providedOptions, ['verbStringProperty', 'sliderStringProperty'], ['adjustSliderStringProperty', 'adjustInSmallerStepsStringProperty', 'adjustInLargerStepsStringProperty']);
    const options = optionize()({
      arrowKeyIconDisplay: ArrowKeyIconDisplay.BOTH,
      headingStringProperty: SceneryPhetStrings.keyboardHelpDialog.sliderControlsStringProperty,
      verbStringProperty: SceneryPhetStrings.keyboardHelpDialog.adjustStringProperty,
      sliderStringProperty: SceneryPhetStrings.keyboardHelpDialog.sliderStringProperty,
      maximumStringProperty: SceneryPhetStrings.keyboardHelpDialog.maximumStringProperty,
      minimumStringProperty: SceneryPhetStrings.keyboardHelpDialog.minimumStringProperty,
      adjustSliderStringProperty: SceneryPhetStrings.keyboardHelpDialog.adjustSliderStringProperty,
      adjustInSmallerStepsStringProperty: SceneryPhetStrings.keyboardHelpDialog.adjustInSmallerStepsStringProperty,
      adjustInLargerStepsStringProperty: SceneryPhetStrings.keyboardHelpDialog.adjustInLargerStepsStringProperty,
      includeSmallerStepsRow: true
    }, providedOptions);
    let adjustSliderStringProperty = options.adjustSliderStringProperty;
    let adjustInSmallerStepsStringProperty = options.adjustInSmallerStepsStringProperty;
    let adjustInLargerStepsStringProperty = options.adjustInLargerStepsStringProperty;
    if (options.verbStringProperty !== SceneryPhetStrings.keyboardHelpDialog.adjustStringProperty || options.sliderStringProperty !== SceneryPhetStrings.keyboardHelpDialog.sliderStringProperty) {
      // we are filling in the verb and name
      adjustSliderStringProperty = new PatternStringProperty(SceneryPhetStrings.keyboardHelpDialog.verbSliderPatternStringProperty, {
        verb: options.verbStringProperty,
        slider: options.sliderStringProperty
      }, {
        tandem: Tandem.OPT_OUT
      });
      adjustInSmallerStepsStringProperty = new PatternStringProperty(SceneryPhetStrings.keyboardHelpDialog.verbInSmallerStepsPatternStringProperty, {
        verb: options.verbStringProperty
      }, {
        tandem: Tandem.OPT_OUT
      });
      adjustInLargerStepsStringProperty = new PatternStringProperty(SceneryPhetStrings.keyboardHelpDialog.verbInLargerStepsPatternStringProperty, {
        verb: options.verbStringProperty
      }, {
        tandem: Tandem.OPT_OUT
      });
    }
    const keysStringProperty = options.arrowKeyIconDisplay === ArrowKeyIconDisplay.LEFT_RIGHT ? SceneryPhetStrings.a11y.keyboardHelpDialog.slider.leftRightArrowKeysStringProperty : options.arrowKeyIconDisplay === ArrowKeyIconDisplay.UP_DOWN ? SceneryPhetStrings.a11y.keyboardHelpDialog.slider.upDownArrowKeysStringProperty : options.arrowKeyIconDisplay === ArrowKeyIconDisplay.BOTH ? new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.orKeysPatternStringProperty, {
      leftRight: SceneryPhetStrings.a11y.keyboardHelpDialog.slider.leftRightArrowKeysStringProperty,
      upDown: SceneryPhetStrings.a11y.keyboardHelpDialog.slider.upDownArrowKeysStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    }) : null;
    assert && assert(keysStringProperty);
    const keyboardHelpDialogDefaultStepsStringProperty = new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.defaultStepsDescriptionPatternStringProperty, {
      verb: options.verbStringProperty,
      slider: options.sliderStringProperty,
      keys: keysStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    });
    const shiftKeysStringProperty = options.arrowKeyIconDisplay === ArrowKeyIconDisplay.LEFT_RIGHT ? SceneryPhetStrings.a11y.keyboardHelpDialog.slider.shiftLeftRightArrowKeysStringProperty : options.arrowKeyIconDisplay === ArrowKeyIconDisplay.UP_DOWN ? SceneryPhetStrings.a11y.keyboardHelpDialog.slider.shiftUpDownArrowKeysStringProperty : options.arrowKeyIconDisplay === ArrowKeyIconDisplay.BOTH ? new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.orKeysPatternStringProperty, {
      leftRight: SceneryPhetStrings.a11y.keyboardHelpDialog.slider.shiftLeftRightArrowKeysStringProperty,
      upDown: SceneryPhetStrings.a11y.keyboardHelpDialog.slider.shiftUpDownArrowKeysStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    }) : null;
    assert && assert(shiftKeysStringProperty);
    const keyboardHelpDialogSmallerStepsStringProperty = new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.smallerStepsDescriptionPatternStringProperty, {
      verb: options.verbStringProperty,
      keys: shiftKeysStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    });
    const keyboardHelpDialogLargerStepsStringProperty = new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.largerStepsDescriptionPatternStringProperty, {
      verb: options.verbStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    });
    const jumpToMinimumStringProperty = new PatternStringProperty(SceneryPhetStrings.keyboardHelpDialog.jumpToMinimumPatternStringProperty, {
      minimum: options.minimumStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    });
    const jumpToMaximumStringProperty = new PatternStringProperty(SceneryPhetStrings.keyboardHelpDialog.jumpToMaximumPatternStringProperty, {
      maximum: options.maximumStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    });
    const jumpToMinimumDescriptionStringProperty = new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.jumpToMinimumDescriptionPatternStringProperty, {
      minimum: options.minimumStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    });
    const jumpToMaximumDescriptionStringProperty = new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.jumpToMaximumDescriptionPatternStringProperty, {
      maximum: options.maximumStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    });

    // 'Move sliders' content

    const leftRightArrowKeysRowIcon = KeyboardHelpIconFactory.leftRightArrowKeysRowIcon();
    const shiftPlusLeftRightIcon = KeyboardHelpIconFactory.shiftPlusIcon(leftRightArrowKeysRowIcon);
    const upDownArrowKeysRowIcon = KeyboardHelpIconFactory.upDownArrowKeysRowIcon();
    const shiftPlusUpDownIcon = KeyboardHelpIconFactory.shiftPlusIcon(upDownArrowKeysRowIcon);
    const leftRightOrUpDownIcon = KeyboardHelpIconFactory.iconOrIcon(leftRightArrowKeysRowIcon, upDownArrowKeysRowIcon);
    let adjustSliderIcon = null;
    let adjustSliderSmallerStepsIcons = null;
    switch (options.arrowKeyIconDisplay) {
      case ArrowKeyIconDisplay.LEFT_RIGHT:
        adjustSliderIcon = leftRightArrowKeysRowIcon;
        adjustSliderSmallerStepsIcons = [shiftPlusLeftRightIcon];
        break;
      case ArrowKeyIconDisplay.UP_DOWN:
        adjustSliderIcon = upDownArrowKeysRowIcon;
        adjustSliderSmallerStepsIcons = [shiftPlusUpDownIcon];
        break;
      default:
        assert && assert(options.arrowKeyIconDisplay === ArrowKeyIconDisplay.BOTH, 'unsupported arrowKeyIconDisplay');
        adjustSliderIcon = leftRightOrUpDownIcon;
        adjustSliderSmallerStepsIcons = [shiftPlusLeftRightIcon, shiftPlusUpDownIcon];
    }
    const adjustSliderRow = KeyboardHelpSectionRow.labelWithIcon(adjustSliderStringProperty, adjustSliderIcon, {
      labelInnerContent: keyboardHelpDialogDefaultStepsStringProperty
    });
    const adjustSliderInSmallerStepsRow = KeyboardHelpSectionRow.labelWithIconList(adjustInSmallerStepsStringProperty, adjustSliderSmallerStepsIcons, {
      labelInnerContent: keyboardHelpDialogSmallerStepsStringProperty
    });

    // 'move in larger steps' content
    const pageUpKeyNode = TextKeyNode.pageUp();
    const pageDownKeyNode = TextKeyNode.pageDown();
    const pageUpPageDownIcon = new HBox({
      children: [pageUpKeyNode, pageDownKeyNode],
      spacing: KeyboardHelpIconFactory.DEFAULT_ICON_SPACING
    });
    const adjustInLargerStepsRow = KeyboardHelpSectionRow.labelWithIcon(adjustInLargerStepsStringProperty, pageUpPageDownIcon, {
      labelInnerContent: keyboardHelpDialogLargerStepsStringProperty
    });

    // 'move to minimum value' content
    const homeKeyNode = TextKeyNode.home();
    const jumpToMinimumRow = KeyboardHelpSectionRow.labelWithIcon(jumpToMinimumStringProperty, homeKeyNode, {
      labelInnerContent: jumpToMinimumDescriptionStringProperty
    });

    // 'move to maximum value' content
    const endKeyNode = TextKeyNode.end();
    const jumpToMaximumRow = KeyboardHelpSectionRow.labelWithIcon(jumpToMaximumStringProperty, endKeyNode, {
      labelInnerContent: jumpToMaximumDescriptionStringProperty
    });

    // assemble final content for KeyboardHelpSection
    const content = [adjustSliderRow, ...(options.includeSmallerStepsRow ? [adjustSliderInSmallerStepsRow] : []), adjustInLargerStepsRow, jumpToMinimumRow, jumpToMaximumRow];
    super(options.headingStringProperty, content, options);
  }
}
sceneryPhet.register('SliderControlsKeyboardHelpSection', SliderControlsKeyboardHelpSection);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJFbnVtZXJhdGlvbiIsIkVudW1lcmF0aW9uVmFsdWUiLCJvcHRpb25pemUiLCJIQm94Iiwic2NlbmVyeVBoZXQiLCJTY2VuZXJ5UGhldFN0cmluZ3MiLCJUZXh0S2V5Tm9kZSIsIktleWJvYXJkSGVscEljb25GYWN0b3J5IiwiS2V5Ym9hcmRIZWxwU2VjdGlvbiIsIktleWJvYXJkSGVscFNlY3Rpb25Sb3ciLCJUYW5kZW0iLCJhc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMiLCJBcnJvd0tleUljb25EaXNwbGF5IiwiVVBfRE9XTiIsIkxFRlRfUklHSFQiLCJCT1RIIiwiZW51bWVyYXRpb24iLCJTbGlkZXJDb250cm9sc0tleWJvYXJkSGVscFNlY3Rpb24iLCJjb25zdHJ1Y3RvciIsInByb3ZpZGVkT3B0aW9ucyIsImFzc2VydCIsIm9wdGlvbnMiLCJhcnJvd0tleUljb25EaXNwbGF5IiwiaGVhZGluZ1N0cmluZ1Byb3BlcnR5Iiwia2V5Ym9hcmRIZWxwRGlhbG9nIiwic2xpZGVyQ29udHJvbHNTdHJpbmdQcm9wZXJ0eSIsInZlcmJTdHJpbmdQcm9wZXJ0eSIsImFkanVzdFN0cmluZ1Byb3BlcnR5Iiwic2xpZGVyU3RyaW5nUHJvcGVydHkiLCJtYXhpbXVtU3RyaW5nUHJvcGVydHkiLCJtaW5pbXVtU3RyaW5nUHJvcGVydHkiLCJhZGp1c3RTbGlkZXJTdHJpbmdQcm9wZXJ0eSIsImFkanVzdEluU21hbGxlclN0ZXBzU3RyaW5nUHJvcGVydHkiLCJhZGp1c3RJbkxhcmdlclN0ZXBzU3RyaW5nUHJvcGVydHkiLCJpbmNsdWRlU21hbGxlclN0ZXBzUm93IiwidmVyYlNsaWRlclBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsInZlcmIiLCJzbGlkZXIiLCJ0YW5kZW0iLCJPUFRfT1VUIiwidmVyYkluU21hbGxlclN0ZXBzUGF0dGVyblN0cmluZ1Byb3BlcnR5IiwidmVyYkluTGFyZ2VyU3RlcHNQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJrZXlzU3RyaW5nUHJvcGVydHkiLCJhMTF5IiwibGVmdFJpZ2h0QXJyb3dLZXlzU3RyaW5nUHJvcGVydHkiLCJ1cERvd25BcnJvd0tleXNTdHJpbmdQcm9wZXJ0eSIsIm9yS2V5c1BhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsImxlZnRSaWdodCIsInVwRG93biIsImtleWJvYXJkSGVscERpYWxvZ0RlZmF1bHRTdGVwc1N0cmluZ1Byb3BlcnR5IiwiZGVmYXVsdFN0ZXBzRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJrZXlzIiwic2hpZnRLZXlzU3RyaW5nUHJvcGVydHkiLCJzaGlmdExlZnRSaWdodEFycm93S2V5c1N0cmluZ1Byb3BlcnR5Iiwic2hpZnRVcERvd25BcnJvd0tleXNTdHJpbmdQcm9wZXJ0eSIsImtleWJvYXJkSGVscERpYWxvZ1NtYWxsZXJTdGVwc1N0cmluZ1Byb3BlcnR5Iiwic21hbGxlclN0ZXBzRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJrZXlib2FyZEhlbHBEaWFsb2dMYXJnZXJTdGVwc1N0cmluZ1Byb3BlcnR5IiwibGFyZ2VyU3RlcHNEZXNjcmlwdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsImp1bXBUb01pbmltdW1TdHJpbmdQcm9wZXJ0eSIsImp1bXBUb01pbmltdW1QYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJtaW5pbXVtIiwianVtcFRvTWF4aW11bVN0cmluZ1Byb3BlcnR5IiwianVtcFRvTWF4aW11bVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsIm1heGltdW0iLCJqdW1wVG9NaW5pbXVtRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eSIsImp1bXBUb01pbmltdW1EZXNjcmlwdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsImp1bXBUb01heGltdW1EZXNjcmlwdGlvblN0cmluZ1Byb3BlcnR5IiwianVtcFRvTWF4aW11bURlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5IiwibGVmdFJpZ2h0QXJyb3dLZXlzUm93SWNvbiIsInNoaWZ0UGx1c0xlZnRSaWdodEljb24iLCJzaGlmdFBsdXNJY29uIiwidXBEb3duQXJyb3dLZXlzUm93SWNvbiIsInNoaWZ0UGx1c1VwRG93bkljb24iLCJsZWZ0UmlnaHRPclVwRG93bkljb24iLCJpY29uT3JJY29uIiwiYWRqdXN0U2xpZGVySWNvbiIsImFkanVzdFNsaWRlclNtYWxsZXJTdGVwc0ljb25zIiwiYWRqdXN0U2xpZGVyUm93IiwibGFiZWxXaXRoSWNvbiIsImxhYmVsSW5uZXJDb250ZW50IiwiYWRqdXN0U2xpZGVySW5TbWFsbGVyU3RlcHNSb3ciLCJsYWJlbFdpdGhJY29uTGlzdCIsInBhZ2VVcEtleU5vZGUiLCJwYWdlVXAiLCJwYWdlRG93bktleU5vZGUiLCJwYWdlRG93biIsInBhZ2VVcFBhZ2VEb3duSWNvbiIsImNoaWxkcmVuIiwic3BhY2luZyIsIkRFRkFVTFRfSUNPTl9TUEFDSU5HIiwiYWRqdXN0SW5MYXJnZXJTdGVwc1JvdyIsImhvbWVLZXlOb2RlIiwiaG9tZSIsImp1bXBUb01pbmltdW1Sb3ciLCJlbmRLZXlOb2RlIiwiZW5kIiwianVtcFRvTWF4aW11bVJvdyIsImNvbnRlbnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNsaWRlckNvbnRyb2xzS2V5Ym9hcmRIZWxwU2VjdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNy0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDb250ZW50IGZvciBhIEtleWJvYXJkSGVscERpYWxvZyB0aGF0IGRlc2NyaWJlcyBob3cgdG8gdXNlIHNsaWRlcnMuXHJcbiAqXHJcbiAqIEBhdXRob3IgSmVzc2UgR3JlZW5iZXJnXHJcbiAqL1xyXG5cclxuaW1wb3J0IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1BhdHRlcm5TdHJpbmdQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IEVudW1lcmF0aW9uIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9FbnVtZXJhdGlvbi5qcyc7XHJcbmltcG9ydCBFbnVtZXJhdGlvblZhbHVlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9FbnVtZXJhdGlvblZhbHVlLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHsgSEJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBzY2VuZXJ5UGhldCBmcm9tICcuLi8uLi9zY2VuZXJ5UGhldC5qcyc7XHJcbmltcG9ydCBTY2VuZXJ5UGhldFN0cmluZ3MgZnJvbSAnLi4vLi4vU2NlbmVyeVBoZXRTdHJpbmdzLmpzJztcclxuaW1wb3J0IFRleHRLZXlOb2RlIGZyb20gJy4uL1RleHRLZXlOb2RlLmpzJztcclxuaW1wb3J0IEtleWJvYXJkSGVscEljb25GYWN0b3J5IGZyb20gJy4vS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkuanMnO1xyXG5pbXBvcnQgS2V5Ym9hcmRIZWxwU2VjdGlvbiwgeyBLZXlib2FyZEhlbHBTZWN0aW9uT3B0aW9ucyB9IGZyb20gJy4vS2V5Ym9hcmRIZWxwU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBLZXlib2FyZEhlbHBTZWN0aW9uUm93IGZyb20gJy4vS2V5Ym9hcmRIZWxwU2VjdGlvblJvdy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBhc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL2Fzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucy5qcyc7XHJcblxyXG4vLyBDb25maWd1cmF0aW9ucyBvZiBhcnJvdyBrZXlzIHRoYXQgY2FuIGJlIGRpc3BsYXllZCBmb3IgJ01vdmUgYmV0d2VlbiBpdGVtcyBpbiBhIGdyb3VwJ1xyXG5jbGFzcyBBcnJvd0tleUljb25EaXNwbGF5IGV4dGVuZHMgRW51bWVyYXRpb25WYWx1ZSB7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBVUF9ET1dOID0gbmV3IEFycm93S2V5SWNvbkRpc3BsYXkoKTtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IExFRlRfUklHSFQgPSBuZXcgQXJyb3dLZXlJY29uRGlzcGxheSgpO1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQk9USCA9IG5ldyBBcnJvd0tleUljb25EaXNwbGF5KCk7XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgZW51bWVyYXRpb24gPSBuZXcgRW51bWVyYXRpb24oIEFycm93S2V5SWNvbkRpc3BsYXkgKTtcclxufVxyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuXHJcbiAgLy8gV2hldGhlciB0byBzaG93IHVwL2Rvd24sIGxlZnQvcmlnaHQgb3IgYm90aCBzZXRzIG9mIGtleWJvYXJkIGhlbHAgaWNvbnMgdG8gY3VlIHRoZSBzbGlkZXIgaW50ZXJhY3Rpb24uXHJcbiAgYXJyb3dLZXlJY29uRGlzcGxheT86IEFycm93S2V5SWNvbkRpc3BsYXk7XHJcblxyXG4gIC8vIGhlYWRpbmcgc3RyaW5nIGZvciB0aGlzIGNvbnRlbnRcclxuICBoZWFkaW5nU3RyaW5nUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+O1xyXG5cclxuICAvLyBjdXN0b20gc3RyaW5nIGZvciB0aGUgXCJBZGp1c3QgU2xpZGVyXCIgcm93XHJcbiAgYWRqdXN0U2xpZGVyU3RyaW5nUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+O1xyXG5cclxuICAvLyBjdXN0b20gc3RyaW5nIGZvciB0aGUgXCJBZGp1c3QgaW4gU21hbGxlciBTdGVwc1wiIHJvd1xyXG4gIGFkanVzdEluU21hbGxlclN0ZXBzU3RyaW5nUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+O1xyXG5cclxuICAvLyBjdXN0b20gc3RyaW5nIGZvciB0aGUgXCJBZGp1c3QgaW4gTGFyZ2VyIFN0ZXBzXCIgcm93XHJcbiAgYWRqdXN0SW5MYXJnZXJTdGVwc1N0cmluZ1Byb3BlcnR5PzogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPjtcclxuXHJcbiAgLy8gdmVyYiB1c2VkIHRvIGRlc2NyaWJlIHRoZSBtb3ZlbWVudCBvZiB0aGUgc2xpZGVyIC0gdGhpcyB3aWxsIGJlIGZpbGxlZCBpbnRvIHRoZSBkZWZhdWx0IHBhdHRlcm4gZm9yXHJcbiAgLy8gZWFjaCByb3cgc28geW91IGNhbm5vdCB1c2UgdGhpcyBhbmQgdGhlIG90aGVyIHN0cmluZyBvcHRpb25zIGF0IHRoZSBzYW1lIHRpbWVcclxuICB2ZXJiU3RyaW5nUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+O1xyXG5cclxuICAvLyBuYW1lIHRvIGNhbGwgdGhlIHNsaWRlciAobG93ZXJjYXNlKSwgZGVmYXVsdCB0byBcInNsaWRlclwiIC0gdGhpcyB3aWxsIGJlIGZpbGxlZCBpbnRvIHRoZSBkZWZhdWx0IHBhdHRlcm4gZm9yXHJcbiAgLy8gZWFjaCByb3cgc28geW91IGNhbm5vdCB1c2UgdGhpcyBhbmQgdGhlIG90aGVyIHN0cmluZyBvcHRpb25zIGF0IHRoZSBzYW1lIHRpbWVcclxuICBzbGlkZXJTdHJpbmdQcm9wZXJ0eT86IFRSZWFkT25seVByb3BlcnR5PHN0cmluZz47XHJcblxyXG4gIC8vIFN0cmluZ3MgZm9yIGV4dHJlbWl0aWVzIHRvIHN1cHBvcnQgc2hvcnRjdXRzIGxpa2UgXCJqdW1wIHRvIG1heGltdW1cIiAocmVuYW1pbmcgXCJtYXhpbXVtXCIgaWYgZGVzaXJlZC5cclxuICBtYXhpbXVtU3RyaW5nUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+O1xyXG4gIG1pbmltdW1TdHJpbmdQcm9wZXJ0eT86IFRSZWFkT25seVByb3BlcnR5PHN0cmluZz47XHJcblxyXG4gIC8vIFRoaXMgb3B0aW9uIGRldGVybWluZXMgd2hldGhlciB0aGlzIGtleWJvYXJkIGhlbHAgc2VjdGlvbiB3aWxsIGhhdmUgdGhlXHJcbiAgLy8gXCJBZGp1c3QgaW4gU21hbGxlciBTdGVwc1wiIHJvdy4gVGhlIHJvdyBpbmNsdWRlcyB0aGUgc3RyaW5nIGFuZCBrZXkgaWNvbnMuXHJcbiAgaW5jbHVkZVNtYWxsZXJTdGVwc1Jvdz86IGJvb2xlYW47XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBTbGlkZXJDb250cm9sc0tleWJvYXJkSGVscFNlY3Rpb25PcHRpb25zID0gU2VsZk9wdGlvbnMgJiBLZXlib2FyZEhlbHBTZWN0aW9uT3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlckNvbnRyb2xzS2V5Ym9hcmRIZWxwU2VjdGlvbiBleHRlbmRzIEtleWJvYXJkSGVscFNlY3Rpb24ge1xyXG5cclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEFycm93S2V5SWNvbkRpc3BsYXkgPSBBcnJvd0tleUljb25EaXNwbGF5O1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHByb3ZpZGVkT3B0aW9ucz86IFNsaWRlckNvbnRyb2xzS2V5Ym9hcmRIZWxwU2VjdGlvbk9wdGlvbnMgKSB7XHJcblxyXG4gICAgLy8gSWYgeW91IHByb3ZpZGUgYSBzdHJpbmcgZm9yIHRoZSB2ZXJiIG9yIHNsaWRlciwgaXQgd2lsbCBiZSBmaWxsZWQgaW50byB0aGUgZGVmYXVsdCBwYXR0ZXJuXHJcbiAgICAvLyBmb3IgYWxsIHJvd3Mgc28geW91IGNhbm5vdCBjdXN0b21pemUgZWFjaCByb3cgaW5kaXZpZHVhbGx5LlxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucyggcHJvdmlkZWRPcHRpb25zLFxyXG4gICAgICBbICd2ZXJiU3RyaW5nUHJvcGVydHknLCAnc2xpZGVyU3RyaW5nUHJvcGVydHknIF0sXHJcbiAgICAgIFsgJ2FkanVzdFNsaWRlclN0cmluZ1Byb3BlcnR5JywgJ2FkanVzdEluU21hbGxlclN0ZXBzU3RyaW5nUHJvcGVydHknLCAnYWRqdXN0SW5MYXJnZXJTdGVwc1N0cmluZ1Byb3BlcnR5JyBdICk7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxTbGlkZXJDb250cm9sc0tleWJvYXJkSGVscFNlY3Rpb25PcHRpb25zLCBTZWxmT3B0aW9ucywgS2V5Ym9hcmRIZWxwU2VjdGlvbk9wdGlvbnM+KCkoIHtcclxuICAgICAgYXJyb3dLZXlJY29uRGlzcGxheTogQXJyb3dLZXlJY29uRGlzcGxheS5CT1RILFxyXG4gICAgICBoZWFkaW5nU3RyaW5nUHJvcGVydHk6IFNjZW5lcnlQaGV0U3RyaW5ncy5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyQ29udHJvbHNTdHJpbmdQcm9wZXJ0eSxcclxuXHJcbiAgICAgIHZlcmJTdHJpbmdQcm9wZXJ0eTogU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy5hZGp1c3RTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgc2xpZGVyU3RyaW5nUHJvcGVydHk6IFNjZW5lcnlQaGV0U3RyaW5ncy5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIG1heGltdW1TdHJpbmdQcm9wZXJ0eTogU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy5tYXhpbXVtU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIG1pbmltdW1TdHJpbmdQcm9wZXJ0eTogU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy5taW5pbXVtU3RyaW5nUHJvcGVydHksXHJcblxyXG4gICAgICBhZGp1c3RTbGlkZXJTdHJpbmdQcm9wZXJ0eTogU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy5hZGp1c3RTbGlkZXJTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgYWRqdXN0SW5TbWFsbGVyU3RlcHNTdHJpbmdQcm9wZXJ0eTogU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy5hZGp1c3RJblNtYWxsZXJTdGVwc1N0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBhZGp1c3RJbkxhcmdlclN0ZXBzU3RyaW5nUHJvcGVydHk6IFNjZW5lcnlQaGV0U3RyaW5ncy5rZXlib2FyZEhlbHBEaWFsb2cuYWRqdXN0SW5MYXJnZXJTdGVwc1N0cmluZ1Byb3BlcnR5LFxyXG5cclxuICAgICAgaW5jbHVkZVNtYWxsZXJTdGVwc1JvdzogdHJ1ZVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgbGV0IGFkanVzdFNsaWRlclN0cmluZ1Byb3BlcnR5ID0gb3B0aW9ucy5hZGp1c3RTbGlkZXJTdHJpbmdQcm9wZXJ0eTtcclxuICAgIGxldCBhZGp1c3RJblNtYWxsZXJTdGVwc1N0cmluZ1Byb3BlcnR5ID0gb3B0aW9ucy5hZGp1c3RJblNtYWxsZXJTdGVwc1N0cmluZ1Byb3BlcnR5O1xyXG4gICAgbGV0IGFkanVzdEluTGFyZ2VyU3RlcHNTdHJpbmdQcm9wZXJ0eSA9IG9wdGlvbnMuYWRqdXN0SW5MYXJnZXJTdGVwc1N0cmluZ1Byb3BlcnR5O1xyXG4gICAgaWYgKCBvcHRpb25zLnZlcmJTdHJpbmdQcm9wZXJ0eSAhPT0gU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy5hZGp1c3RTdHJpbmdQcm9wZXJ0eSB8fFxyXG4gICAgICAgICBvcHRpb25zLnNsaWRlclN0cmluZ1Byb3BlcnR5ICE9PSBTY2VuZXJ5UGhldFN0cmluZ3Mua2V5Ym9hcmRIZWxwRGlhbG9nLnNsaWRlclN0cmluZ1Byb3BlcnR5XHJcbiAgICApIHtcclxuXHJcbiAgICAgIC8vIHdlIGFyZSBmaWxsaW5nIGluIHRoZSB2ZXJiIGFuZCBuYW1lXHJcbiAgICAgIGFkanVzdFNsaWRlclN0cmluZ1Byb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy52ZXJiU2xpZGVyUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgICAgdmVyYjogb3B0aW9ucy52ZXJiU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICAgc2xpZGVyOiBvcHRpb25zLnNsaWRlclN0cmluZ1Byb3BlcnR5XHJcbiAgICAgIH0sIHsgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCB9ICk7XHJcbiAgICAgIGFkanVzdEluU21hbGxlclN0ZXBzU3RyaW5nUHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBTY2VuZXJ5UGhldFN0cmluZ3Mua2V5Ym9hcmRIZWxwRGlhbG9nLnZlcmJJblNtYWxsZXJTdGVwc1BhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICAgIHZlcmI6IG9wdGlvbnMudmVyYlN0cmluZ1Byb3BlcnR5XHJcbiAgICAgIH0sIHsgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCB9ICk7XHJcbiAgICAgIGFkanVzdEluTGFyZ2VyU3RlcHNTdHJpbmdQcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIFNjZW5lcnlQaGV0U3RyaW5ncy5rZXlib2FyZEhlbHBEaWFsb2cudmVyYkluTGFyZ2VyU3RlcHNQYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgICB2ZXJiOiBvcHRpb25zLnZlcmJTdHJpbmdQcm9wZXJ0eVxyXG4gICAgICB9LCB7IHRhbmRlbTogVGFuZGVtLk9QVF9PVVQgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGtleXNTdHJpbmdQcm9wZXJ0eSA9XHJcbiAgICAgICggb3B0aW9ucy5hcnJvd0tleUljb25EaXNwbGF5ID09PSBBcnJvd0tleUljb25EaXNwbGF5LkxFRlRfUklHSFQgKSA/IFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIubGVmdFJpZ2h0QXJyb3dLZXlzU3RyaW5nUHJvcGVydHkgOlxyXG4gICAgICAoIG9wdGlvbnMuYXJyb3dLZXlJY29uRGlzcGxheSA9PT0gQXJyb3dLZXlJY29uRGlzcGxheS5VUF9ET1dOICkgPyBTY2VuZXJ5UGhldFN0cmluZ3MuYTExeS5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyLnVwRG93bkFycm93S2V5c1N0cmluZ1Byb3BlcnR5IDpcclxuICAgICAgKCBvcHRpb25zLmFycm93S2V5SWNvbkRpc3BsYXkgPT09IEFycm93S2V5SWNvbkRpc3BsYXkuQk9USCApID9cclxuICAgICAgbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkua2V5Ym9hcmRIZWxwRGlhbG9nLnNsaWRlci5vcktleXNQYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgICBsZWZ0UmlnaHQ6IFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIubGVmdFJpZ2h0QXJyb3dLZXlzU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICAgdXBEb3duOiBTY2VuZXJ5UGhldFN0cmluZ3MuYTExeS5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyLnVwRG93bkFycm93S2V5c1N0cmluZ1Byb3BlcnR5XHJcbiAgICAgIH0sIHsgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCB9ICkgOiBudWxsO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCgga2V5c1N0cmluZ1Byb3BlcnR5ICk7XHJcbiAgICBjb25zdCBrZXlib2FyZEhlbHBEaWFsb2dEZWZhdWx0U3RlcHNTdHJpbmdQcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIuZGVmYXVsdFN0ZXBzRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgdmVyYjogb3B0aW9ucy52ZXJiU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIHNsaWRlcjogb3B0aW9ucy5zbGlkZXJTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAga2V5czoga2V5c1N0cmluZ1Byb3BlcnR5IVxyXG4gICAgfSwgeyB0YW5kZW06IFRhbmRlbS5PUFRfT1VUIH0gKTtcclxuXHJcbiAgICBjb25zdCBzaGlmdEtleXNTdHJpbmdQcm9wZXJ0eSA9XHJcbiAgICAgICggb3B0aW9ucy5hcnJvd0tleUljb25EaXNwbGF5ID09PSBBcnJvd0tleUljb25EaXNwbGF5LkxFRlRfUklHSFQgKSA/IFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIuc2hpZnRMZWZ0UmlnaHRBcnJvd0tleXNTdHJpbmdQcm9wZXJ0eSA6XHJcbiAgICAgICggb3B0aW9ucy5hcnJvd0tleUljb25EaXNwbGF5ID09PSBBcnJvd0tleUljb25EaXNwbGF5LlVQX0RPV04gKSA/IFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIuc2hpZnRVcERvd25BcnJvd0tleXNTdHJpbmdQcm9wZXJ0eSA6XHJcbiAgICAgICggb3B0aW9ucy5hcnJvd0tleUljb25EaXNwbGF5ID09PSBBcnJvd0tleUljb25EaXNwbGF5LkJPVEggKSA/IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIub3JLZXlzUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgICAgbGVmdFJpZ2h0OiBTY2VuZXJ5UGhldFN0cmluZ3MuYTExeS5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyLnNoaWZ0TGVmdFJpZ2h0QXJyb3dLZXlzU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICAgdXBEb3duOiBTY2VuZXJ5UGhldFN0cmluZ3MuYTExeS5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyLnNoaWZ0VXBEb3duQXJyb3dLZXlzU3RyaW5nUHJvcGVydHlcclxuICAgICAgfSwgeyB0YW5kZW06IFRhbmRlbS5PUFRfT1VUIH0gKSA6IG51bGw7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBzaGlmdEtleXNTdHJpbmdQcm9wZXJ0eSApO1xyXG4gICAgY29uc3Qga2V5Ym9hcmRIZWxwRGlhbG9nU21hbGxlclN0ZXBzU3RyaW5nUHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBTY2VuZXJ5UGhldFN0cmluZ3MuYTExeS5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyLnNtYWxsZXJTdGVwc0Rlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIHZlcmI6IG9wdGlvbnMudmVyYlN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBrZXlzOiBzaGlmdEtleXNTdHJpbmdQcm9wZXJ0eSFcclxuICAgIH0sIHsgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCB9ICk7XHJcbiAgICBjb25zdCBrZXlib2FyZEhlbHBEaWFsb2dMYXJnZXJTdGVwc1N0cmluZ1Byb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkua2V5Ym9hcmRIZWxwRGlhbG9nLnNsaWRlci5sYXJnZXJTdGVwc0Rlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIHZlcmI6IG9wdGlvbnMudmVyYlN0cmluZ1Byb3BlcnR5XHJcbiAgICB9LCB7IHRhbmRlbTogVGFuZGVtLk9QVF9PVVQgfSApO1xyXG5cclxuICAgIGNvbnN0IGp1bXBUb01pbmltdW1TdHJpbmdQcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIFNjZW5lcnlQaGV0U3RyaW5ncy5rZXlib2FyZEhlbHBEaWFsb2cuanVtcFRvTWluaW11bVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBtaW5pbXVtOiBvcHRpb25zLm1pbmltdW1TdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSwgeyB0YW5kZW06IFRhbmRlbS5PUFRfT1VUIH0gKTtcclxuICAgIGNvbnN0IGp1bXBUb01heGltdW1TdHJpbmdQcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIFNjZW5lcnlQaGV0U3RyaW5ncy5rZXlib2FyZEhlbHBEaWFsb2cuanVtcFRvTWF4aW11bVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBtYXhpbXVtOiBvcHRpb25zLm1heGltdW1TdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSwgeyB0YW5kZW06IFRhbmRlbS5PUFRfT1VUIH0gKTtcclxuICAgIGNvbnN0IGp1bXBUb01pbmltdW1EZXNjcmlwdGlvblN0cmluZ1Byb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkua2V5Ym9hcmRIZWxwRGlhbG9nLnNsaWRlci5qdW1wVG9NaW5pbXVtRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgbWluaW11bTogb3B0aW9ucy5taW5pbXVtU3RyaW5nUHJvcGVydHlcclxuICAgIH0sIHsgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCB9ICk7XHJcbiAgICBjb25zdCBqdW1wVG9NYXhpbXVtRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIuanVtcFRvTWF4aW11bURlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIG1heGltdW06IG9wdGlvbnMubWF4aW11bVN0cmluZ1Byb3BlcnR5XHJcbiAgICB9LCB7IHRhbmRlbTogVGFuZGVtLk9QVF9PVVQgfSApO1xyXG5cclxuICAgIC8vICdNb3ZlIHNsaWRlcnMnIGNvbnRlbnRcclxuXHJcbiAgICBjb25zdCBsZWZ0UmlnaHRBcnJvd0tleXNSb3dJY29uID0gS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkubGVmdFJpZ2h0QXJyb3dLZXlzUm93SWNvbigpO1xyXG4gICAgY29uc3Qgc2hpZnRQbHVzTGVmdFJpZ2h0SWNvbiA9IEtleWJvYXJkSGVscEljb25GYWN0b3J5LnNoaWZ0UGx1c0ljb24oIGxlZnRSaWdodEFycm93S2V5c1Jvd0ljb24gKTtcclxuICAgIGNvbnN0IHVwRG93bkFycm93S2V5c1Jvd0ljb24gPSBLZXlib2FyZEhlbHBJY29uRmFjdG9yeS51cERvd25BcnJvd0tleXNSb3dJY29uKCk7XHJcbiAgICBjb25zdCBzaGlmdFBsdXNVcERvd25JY29uID0gS2V5Ym9hcmRIZWxwSWNvbkZhY3Rvcnkuc2hpZnRQbHVzSWNvbiggdXBEb3duQXJyb3dLZXlzUm93SWNvbiApO1xyXG4gICAgY29uc3QgbGVmdFJpZ2h0T3JVcERvd25JY29uID0gS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkuaWNvbk9ySWNvbiggbGVmdFJpZ2h0QXJyb3dLZXlzUm93SWNvbiwgdXBEb3duQXJyb3dLZXlzUm93SWNvbiApO1xyXG5cclxuICAgIGxldCBhZGp1c3RTbGlkZXJJY29uID0gbnVsbDtcclxuICAgIGxldCBhZGp1c3RTbGlkZXJTbWFsbGVyU3RlcHNJY29ucyA9IG51bGw7XHJcblxyXG4gICAgc3dpdGNoKCBvcHRpb25zLmFycm93S2V5SWNvbkRpc3BsYXkgKSB7XHJcbiAgICAgIGNhc2UgQXJyb3dLZXlJY29uRGlzcGxheS5MRUZUX1JJR0hUOlxyXG4gICAgICAgIGFkanVzdFNsaWRlckljb24gPSBsZWZ0UmlnaHRBcnJvd0tleXNSb3dJY29uO1xyXG4gICAgICAgIGFkanVzdFNsaWRlclNtYWxsZXJTdGVwc0ljb25zID0gWyBzaGlmdFBsdXNMZWZ0UmlnaHRJY29uIF07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQXJyb3dLZXlJY29uRGlzcGxheS5VUF9ET1dOOlxyXG4gICAgICAgIGFkanVzdFNsaWRlckljb24gPSB1cERvd25BcnJvd0tleXNSb3dJY29uO1xyXG4gICAgICAgIGFkanVzdFNsaWRlclNtYWxsZXJTdGVwc0ljb25zID0gWyBzaGlmdFBsdXNVcERvd25JY29uIF07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5hcnJvd0tleUljb25EaXNwbGF5ID09PSBBcnJvd0tleUljb25EaXNwbGF5LkJPVEgsICd1bnN1cHBvcnRlZCBhcnJvd0tleUljb25EaXNwbGF5JyApO1xyXG4gICAgICAgIGFkanVzdFNsaWRlckljb24gPSBsZWZ0UmlnaHRPclVwRG93bkljb247XHJcbiAgICAgICAgYWRqdXN0U2xpZGVyU21hbGxlclN0ZXBzSWNvbnMgPSBbIHNoaWZ0UGx1c0xlZnRSaWdodEljb24sIHNoaWZ0UGx1c1VwRG93bkljb24gXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFkanVzdFNsaWRlclJvdyA9IEtleWJvYXJkSGVscFNlY3Rpb25Sb3cubGFiZWxXaXRoSWNvbiggYWRqdXN0U2xpZGVyU3RyaW5nUHJvcGVydHksIGFkanVzdFNsaWRlckljb24sIHtcclxuICAgICAgbGFiZWxJbm5lckNvbnRlbnQ6IGtleWJvYXJkSGVscERpYWxvZ0RlZmF1bHRTdGVwc1N0cmluZ1Byb3BlcnR5XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgYWRqdXN0U2xpZGVySW5TbWFsbGVyU3RlcHNSb3cgPSBLZXlib2FyZEhlbHBTZWN0aW9uUm93LmxhYmVsV2l0aEljb25MaXN0KCBhZGp1c3RJblNtYWxsZXJTdGVwc1N0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBhZGp1c3RTbGlkZXJTbWFsbGVyU3RlcHNJY29ucywge1xyXG4gICAgICAgIGxhYmVsSW5uZXJDb250ZW50OiBrZXlib2FyZEhlbHBEaWFsb2dTbWFsbGVyU3RlcHNTdHJpbmdQcm9wZXJ0eVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gJ21vdmUgaW4gbGFyZ2VyIHN0ZXBzJyBjb250ZW50XHJcbiAgICBjb25zdCBwYWdlVXBLZXlOb2RlID0gVGV4dEtleU5vZGUucGFnZVVwKCk7XHJcbiAgICBjb25zdCBwYWdlRG93bktleU5vZGUgPSBUZXh0S2V5Tm9kZS5wYWdlRG93bigpO1xyXG4gICAgY29uc3QgcGFnZVVwUGFnZURvd25JY29uID0gbmV3IEhCb3goIHtcclxuICAgICAgY2hpbGRyZW46IFsgcGFnZVVwS2V5Tm9kZSwgcGFnZURvd25LZXlOb2RlIF0sXHJcbiAgICAgIHNwYWNpbmc6IEtleWJvYXJkSGVscEljb25GYWN0b3J5LkRFRkFVTFRfSUNPTl9TUEFDSU5HXHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBhZGp1c3RJbkxhcmdlclN0ZXBzUm93ID0gS2V5Ym9hcmRIZWxwU2VjdGlvblJvdy5sYWJlbFdpdGhJY29uKCBhZGp1c3RJbkxhcmdlclN0ZXBzU3RyaW5nUHJvcGVydHksIHBhZ2VVcFBhZ2VEb3duSWNvbiwge1xyXG4gICAgICBsYWJlbElubmVyQ29udGVudDoga2V5Ym9hcmRIZWxwRGlhbG9nTGFyZ2VyU3RlcHNTdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vICdtb3ZlIHRvIG1pbmltdW0gdmFsdWUnIGNvbnRlbnRcclxuICAgIGNvbnN0IGhvbWVLZXlOb2RlID0gVGV4dEtleU5vZGUuaG9tZSgpO1xyXG4gICAgY29uc3QganVtcFRvTWluaW11bVJvdyA9IEtleWJvYXJkSGVscFNlY3Rpb25Sb3cubGFiZWxXaXRoSWNvbigganVtcFRvTWluaW11bVN0cmluZ1Byb3BlcnR5LCBob21lS2V5Tm9kZSwge1xyXG4gICAgICBsYWJlbElubmVyQ29udGVudDoganVtcFRvTWluaW11bURlc2NyaXB0aW9uU3RyaW5nUHJvcGVydHlcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyAnbW92ZSB0byBtYXhpbXVtIHZhbHVlJyBjb250ZW50XHJcbiAgICBjb25zdCBlbmRLZXlOb2RlID0gVGV4dEtleU5vZGUuZW5kKCk7XHJcbiAgICBjb25zdCBqdW1wVG9NYXhpbXVtUm93ID0gS2V5Ym9hcmRIZWxwU2VjdGlvblJvdy5sYWJlbFdpdGhJY29uKCBqdW1wVG9NYXhpbXVtU3RyaW5nUHJvcGVydHksIGVuZEtleU5vZGUsIHtcclxuICAgICAgbGFiZWxJbm5lckNvbnRlbnQ6IGp1bXBUb01heGltdW1EZXNjcmlwdGlvblN0cmluZ1Byb3BlcnR5XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gYXNzZW1ibGUgZmluYWwgY29udGVudCBmb3IgS2V5Ym9hcmRIZWxwU2VjdGlvblxyXG4gICAgY29uc3QgY29udGVudCA9IFsgYWRqdXN0U2xpZGVyUm93LCAuLi4oIG9wdGlvbnMuaW5jbHVkZVNtYWxsZXJTdGVwc1JvdyA/IFsgYWRqdXN0U2xpZGVySW5TbWFsbGVyU3RlcHNSb3cgXSA6IFtdICksIGFkanVzdEluTGFyZ2VyU3RlcHNSb3csIGp1bXBUb01pbmltdW1Sb3csIGp1bXBUb01heGltdW1Sb3cgXTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucy5oZWFkaW5nU3RyaW5nUHJvcGVydHksIGNvbnRlbnQsIG9wdGlvbnMgKTtcclxuICB9XHJcbn1cclxuXHJcbnNjZW5lcnlQaGV0LnJlZ2lzdGVyKCAnU2xpZGVyQ29udHJvbHNLZXlib2FyZEhlbHBTZWN0aW9uJywgU2xpZGVyQ29udHJvbHNLZXlib2FyZEhlbHBTZWN0aW9uICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLHFCQUFxQixNQUFNLDhDQUE4QztBQUVoRixPQUFPQyxXQUFXLE1BQU0seUNBQXlDO0FBQ2pFLE9BQU9DLGdCQUFnQixNQUFNLDhDQUE4QztBQUMzRSxPQUFPQyxTQUFTLE1BQU0sdUNBQXVDO0FBQzdELFNBQVNDLElBQUksUUFBUSxtQ0FBbUM7QUFDeEQsT0FBT0MsV0FBVyxNQUFNLHNCQUFzQjtBQUM5QyxPQUFPQyxrQkFBa0IsTUFBTSw2QkFBNkI7QUFDNUQsT0FBT0MsV0FBVyxNQUFNLG1CQUFtQjtBQUMzQyxPQUFPQyx1QkFBdUIsTUFBTSw4QkFBOEI7QUFDbEUsT0FBT0MsbUJBQW1CLE1BQXNDLDBCQUEwQjtBQUMxRixPQUFPQyxzQkFBc0IsTUFBTSw2QkFBNkI7QUFDaEUs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